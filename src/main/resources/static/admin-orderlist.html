<!DOCTYPE HTML>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>管理者注文情報確認画面</title>
  <link rel="stylesheet" href="admin-top.css">
</head>

<body>
  <h1>WELCOME TO "TEINEI"</h1>
  <h2>注文情報確認</h2>

  <style>
  table { border-collapse: collapse; width: 100%; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
  th { background-color: #eee; }
  .order-id-btn {
    color: blue; cursor: pointer; text-decoration: underline; background: none; border: none; padding: 0; font: inherit;
  }
  
  .modal {
    display: none; 
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.5);
    justify-content: center; align-items: center;
  }
  .modal-content {
    background: white; padding: 20px; border-radius: 5px; max-width: 500px; width: 90%;
  }
  .close-btn {
    float: right; cursor: pointer; font-weight: bold; font-size: 20px;
  }
</style>
</head>
<body>

<h1>注文情報一覧</h1>

<table id="orders-table">
  <thead>
    <tr>
      <th>注文ID</th>
      <th>購入者名</th>
      <th>注文日時</th>
      <th>購入代金</th>
      <th>注文ステータス</th>
    </tr>
  </thead>
  <tbody>
    
  </tbody>
</table>

<div id="order-modal" class="modal">
  <div class="modal-content">
    <span id="close-modal" class="close-btn">&times;</span>
    <h2>注文詳細情報</h2>
    <div id="modal-body">
    
    </div>
  </div>
</div>

<script>

  const orders = [
    {
      order_id: "A001",
      buyer_name: "坂口あやの",
      ship_address: "和歌山県田舎市1-2-3",
      total_price: 15000,
      order_status: "処理中",
      buyer_email: "sakaguchi@example.com",
      pay_method: "代引き",
      order_date: "2025-07-10 10:00",
      detail: "商品A 1個、商品B 2個"
    },
    {
      order_id: "A002",
      buyer_name: "つるれい",
      ship_address: "千葉県端っこ市1-2-3",
      total_price: 9800,
      order_status: "未処理",
      buyer_email: "tsururei@example.com",
      pay_method: "振込",
      order_date: "2025-07-11 14:30",
      detail: "商品C 2個"
    }
  ];

  const tbody = document.querySelector("#orders-table tbody");
  const modal = document.getElementById("order-modal");
  const modalBody = document.getElementById("modal-body");
  const closeModalBtn = document.getElementById("close-modal");

  function displayOrders() {
    tbody.innerHTML = "";
    orders.forEach(order => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td><button class="order-id-btn" data-id="${order.order_id}">${order.order_id}</button></td>
        <td>${order.buyer_name}</td>
        <td>${order.ship_address}</td>
        <td>¥${order.total_price.toLocaleString()}</td>
        <td>${order.order_status}</td>
      `;
      tbody.appendChild(tr);
    });
  }


  function showModal(orderId) {
    const order = orders.find(o => o.order_id === orderId);
    if (!order) return;

    modalBody.innerHTML = `
      <p><strong>注文ID:</strong> ${order.order_id}</p>
      <p><strong>購入者名:</strong> ${order.buyer_name}</p>
      <p><strong>配送先住所:</strong> ${order.ship_address}</p>
      <p><strong>購入代金:</strong> ¥${order.total_price.toLocaleString()}</p>
      <p><strong>注文ステータス:</strong> ${order.order_status}</p>
      <p><strong>メールアドレス:</strong> ${order.buyer_email}</p>
      <p><strong>決済方法:</strong> ${order.pay_method}</p>
      <p><strong>注文日時:</strong> ${order.order_date}</p>
      <p><strong>詳細:</strong> ${order.detail}</p>
    `;
    modal.style.display = "flex";
  }


  closeModalBtn.addEventListener("click", () => {
    modal.style.display = "none";
  });

  tbody.addEventListener("click", e => {
    if (e.target.classList.contains("order-id-btn")) {
      const id = e.target.getAttribute("data-id");
      showModal(id);
    }
  });

  displayOrders();

  window.addEventListener("click", e => {
    if (e.target === modal) {
      modal.style.display = "none";
    }
  });
</script>